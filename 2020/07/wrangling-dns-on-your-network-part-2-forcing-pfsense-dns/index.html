<!doctype html><html lang=en-us>
<head>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Wrangling DNS on Your Network, Part 2: Forcing pfSense DNS","image":"https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/header.png","datePublished":"2020-07-04T00:00:00Z","dateModified":"2020-07-04T00:00:00Z","author":{"@type":"Person","name":"Andy Yasger","image":"https://blog.flippedbits.io/img/profile.jpg"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.flippedbits.io\/2020\/07\/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns\/"},"publisher":{"@type":"Organization","name":"FlippedBits.io","logo":{"@type":"ImageObject","url":"https://blog.flippedbits.io/img/profile.jpg"}},"description":"Now that we have DNS set up for accessing servers and such locally, and we have adblock in place, we might want to prevent things like smart home devices from using their own DNS servers.","keywords":[]}</script>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Hugo 0.92.0 with theme Tranquilpeak 0.5.2-BETA">
<meta name=author content="Andy Yasger">
<meta name=keywords content>
<meta name=description content="Now that we have DNS set up for accessing servers and such locally, and we have adblock in place, we might want to prevent things like smart home devices from using their own DNS servers.">
<meta property="og:description" content="Now that we have DNS set up for accessing servers and such locally, and we have adblock in place, we might want to prevent things like smart home devices from using their own DNS servers.">
<meta property="og:type" content="article">
<meta property="og:title" content="Wrangling DNS on Your Network, Part 2: Forcing pfSense DNS">
<meta name=twitter:title content="Wrangling DNS on Your Network, Part 2: Forcing pfSense DNS">
<meta property="og:url" content="https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/">
<meta property="twitter:url" content="https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/">
<meta property="og:site_name" content="FlippedBits.io">
<meta property="og:description" content="Now that we have DNS set up for accessing servers and such locally, and we have adblock in place, we might want to prevent things like smart home devices from using their own DNS servers.">
<meta name=twitter:description content="Now that we have DNS set up for accessing servers and such locally, and we have adblock in place, we might want to prevent things like smart home devices from using their own DNS servers.">
<meta property="og:locale" content="en-us">
<meta property="article:published_time" content="2020-07-04T00:00:00">
<meta property="article:modified_time" content="2020-07-04T00:00:00">
<meta property="article:section" content="Networking">
<meta property="article:section" content="DNS">
<meta property="article:section" content="Tutorials">
<meta property="article:tag" content="network">
<meta property="article:tag" content="dns">
<meta property="article:tag" content="pfsense">
<meta property="article:tag" content="pihole">
<meta property="article:tag" content="adblock">
<meta property="article:tag" content="port-forward">
<meta property="article:tag" content="nat">
<meta name=twitter:card content="summary">
<meta property="og:image" content="https://blog.flippedbits.io/img/profile.jpg">
<meta property="twitter:image" content="https://blog.flippedbits.io/img/profile.jpg">
<meta property="og:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/header.png">
<meta property="twitter:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/header.png">
<meta property="og:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/header.png">
<meta property="twitter:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/header.png">
<title>Wrangling DNS on Your Network, Part 2: Forcing pfSense DNS</title>
<link rel=icon href=https://blog.flippedbits.io/favicon.png>
<link rel=canonical href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer>
<link rel=stylesheet href=https://blog.flippedbits.io/css/style-8wq9cwjemt0dk532dhttp48fwretmmmm95f7njulto7vefeufdnasgq9a.min.css>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-170794764-1','auto'),ga('send','pageview'))</script>
</head>
<body>
<div id=blog>
<header id=header data-behavior=1>
<i id=btn-open-sidebar class="fa fa-lg fa-bars"></i>
<div class=header-title>
<a class=header-title-link href=https://blog.flippedbits.io/ aria-label="Go to homepage">FlippedBits.io</a>
</div>
<a class=header-right-picture href=https://blog.flippedbits.io/#about aria-label="Open the link: /#about">
<img class=header-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture">
</a>
</header>
<nav id=sidebar data-behavior=1>
<div class=sidebar-container>
<div class=sidebar-profile>
<a href=https://blog.flippedbits.io/#about aria-label="Read more about the author">
<img class=sidebar-profile-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture">
</a>
<h4 class=sidebar-profile-name>Andy Yasger</h4>
<h5 class=sidebar-profile-bio>&ldquo;My documentation is <em><strong>in</strong></em> the code!&rdquo;</h5>
</div>
<ul class=sidebar-buttons>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://blog.flippedbits.io/ title=Home>
<i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://blog.flippedbits.io/categories title=Categories>
<i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>Categories</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://blog.flippedbits.io/tags title=Tags>
<i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://blog.flippedbits.io/archives title=Archives>
<i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden=true></i>
<span class=sidebar-button-desc>Archives</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://blog.flippedbits.io/page/about-me title="About Me">
<i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About Me</span>
</a>
</li>
</ul>
<ul class=sidebar-buttons>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://github.com/TechGeek01 target=_blank rel=noopener title=GitHub>
<i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span>
</a>
</li>
</ul>
<ul class=sidebar-buttons>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://blog.flippedbits.io/index.xml title=RSS>
<i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span>
</a>
</li>
</ul>
</div>
</nav>
<div class="post-header-cover
text-center
post-header-cover--partial" style=background-image:url(/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/header.png) data-behavior=1>
</div>
<div id=main data-behavior=1 class="hasCover
hasCoverMetaOut">
<article class=post id=top>
<div class="post-header main-content-wrap text-center">
<h1 class=post-title>
Wrangling DNS on Your Network, Part 2: Forcing pfSense DNS
</h1>
<div class="postShorten-meta post-meta">
<time datetime=2020-07-04T00:00:00Z>
July 4, 2020
</time>
<span>in</span>
<a class=category-link href=https://blog.flippedbits.io/categories/networking>Networking</a>,
<a class=category-link href=https://blog.flippedbits.io/categories/dns>DNS</a>,
<a class=category-link href=https://blog.flippedbits.io/categories/tutorials>Tutorials</a>
<br>
<span class=postReadingTime>
7 minute read
</span>
</div>
</div>
<div class="post-content markdown">
<div class=main-content-wrap>
<div class="alert info">
<p><p>This is part of a multi-part series on DNS.</p>
<p>In part 3, we <a href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-3-pfblockerng/>replace Pi-hole with pfBlockerNG</a> to attempt to put all our DNS stuff on one device.</p>
</p>
</div>
<h2 id=an-addendum>An addendum</h2>
<div class="alert info">
<p>In part 1, we set up Pi-hole for ad blocking, and set pfSense for local DNS with the DNS resolver. In setting this up, there was an oversight that I&rsquo;ve made. DNS over TLS is definitely an option, so let&rsquo;s fix that and set it up now.</p>
</div>
<p>I&rsquo;m going to assume you&rsquo;re using Cloudflare, as that&rsquo;s what I&rsquo;m using, for upstream DNS. As long as your preferred provider supports DNS over TLS, you can swap your own in. Just substitute Cloudflare for your preferred servers.</p>
<p>First off, make sure your DNS is set up properly. Head to <strong>System > General</strong> and add your DNS servers like so:</p>
</div>
<div class="figure figure--fullWidth">
<img class=figure-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/pfsense-general-dns-settings.png alt="Set your DNS to Cloudflare, or whatever your preferred provider is"><span class=caption>Set your DNS to Cloudflare, or whatever your preferred provider is</span>
</div>
<div class=main-content-wrap>
<p>Next, go to <strong>Services > DNS Resolver</strong> and check on a couple of options:</p>
<ul>
<li><strong>Enable Forwarding Mode:</strong> Checked</li>
<li><strong>Use SSL/TLS for outgoing DNS Queries to Forwarding Servers:</strong> Checked</li>
</ul>
<p>Once you <span class="highlight-text primary">Save</span>, you should be all set with DNS over TLS!</p>
<h2 id=on-to-the-dns-forcing>On to the DNS forcing&mldr;</h2>
<p>So we previously <a href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-1-pi-hole/>set up Pi-hole for DNS adblock, and pfSense to handle local hostnames</a>. Now that adblock is happening everywhere, there&rsquo;s another slight problem you might run into. You might notice that DHCP is handing out the correct addresses, and clients are being told to use Pi-hole for the DNS servers. And if you&rsquo;re running static stuff like server VMs and such, you have the correct statically-assigned DNS servers too!</p>
<p>So then, <em>why does your Alexa still have ads when you listen to music?</em></p>
<p>The problem that we&rsquo;ve run into here is that some devices, even if you tell them what DNS servers to use, hardcode their own DNS servers anyway, and don&rsquo;t listen to the DHCP offerings. The good news is that there&rsquo;s a solution to this problem.</p>
<h2 id=lets-learn-about-nat>Let&rsquo;s learn about NAT</h2>
<p>The important thing to know about here to force DNS is to know how your router works.</p>
<p>When you connect to the internet, your ISP hands you a public IP address that can be used to contact you, and let you contact others. In most cases, unless you&rsquo;re paying for a business or something similar, you probably only get one of these addresses, since there&rsquo;s a limited number of them to go around.</p>
<p>But when you connect to the internet, you have more than one device behind your network, so how exactly does this work if you only get one public IP?</p>
<p>Every connection you make to somewhere is not just an IP address. Every service, like a web page, or a game server, or SSH, or FTP, runs on a given port. Each connection that you make to somewhere, whether it&rsquo;s local on your network, or public on the internet, uses a combination of an IP address and port to connect to. This connection is called a socket, and looks something like <code>174.28.36.117:22</code>, where the port is after the IP address, separated by a colon.</p>
<p>The problem with this approach, is that behind your network, since you have multiple devices, your router can&rsquo;t just translate the IP address, since you might have multiple devices that run stuff or make requests on the same port. To avoid this conflict, your router randomizes these ports when it sends requests out. If you access a website on your laptop, and another on your phone, both of those private IP addresses are sending out a request on port 80. Your router, to translate this to one public IP, obviously can&rsquo;t translate both to port 80, or it won&rsquo;t know which device to send the packets back to when it gets a response.</p>
<p>To fix this, your router randomizes the ports. Your laptop might have port 80 translated to port 50000 on the way out, and your phone might get translated to 50001. This process, known as <em><strong>Network Address Translation</strong></em> ensures that every connection on your network is uniquely identifiable.</p>
<h2 id=what-about-incoming-connections>What about incoming connections?</h2>
<p>For outgoing connections, ports are randomized. This works on the way out, and since your router tracks these, it&rsquo;ll know where to send return packets on the way back in. &ldquo;<em>But what if you&rsquo;re hosting a Minecraft server, and you need incoming connections to work?</em>&rdquo; you say. If you host a server on a computer on your network, and people connect to your public IP on port 25565, it won&rsquo;t work. Why? Because that connection was initiated from the outside, so your router doesn&rsquo;t know where to send the packets.</p>
<p>The solution to this is what we know as <em><strong>port forwarding</strong></em>. To fix this, we can create a port forwarding rule, to tell the router &ldquo;Anything on port 25565 coming in, send to 10.0.0.50 on port 25565&rdquo; and suddenly, your Minecraft server works, and people can play with you.</p>
<h2 id=so-how-is-this-relevant-to-forcing-dns>So how is this relevant to forcing DNS?</h2>
<p>This might not immediately seem relevant, but the key here is that to make a port forwarding rule, it needs to know what interface to listen on. In pfSense, this defaults to WAN, but we can change this.</p>
<p>There&rsquo;s a process commonly known as <em><strong>reverse NAT</strong></em> that we can use here. What if instead of creating a port forward rule on WAN, we make one on the LAN interface? And what if we listen on port 53, and forward it to <code>127.0.0.1:53</code>? That rule does exactly what it sounds like. It means that instead of DNS requests to servers like Google&rsquo;s 8.8.8.8, this NAT rule captures this request. Since this request is listened to on the LAN interface, on port 53, it gets captured, and pfSense forwards it to itself on port 53. And this means that the DNS request is answered by its own Unbound DNS resolver.</p>
<p>To set this up, we need to change a few settings first.</p>
<div class="alert warning">
<p>Before we add the port forwarding rules, make sure the Unbound DNS resolver is configured to bind and answer queries, either on <strong>Localhost</strong> or <strong>All interfaces</strong>! Things will break if you don&rsquo;t do this first.</p>
</div>
</div>
<div class="figure figure--fullWidth">
<img class=figure-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/pfsense-resolver-interfaces-all.png alt="Make sure 'Network interfaces' is set either to 'All interfaces' or 'Localhost' here."><span class=caption>Make sure 'Network interfaces' is set either to 'All interfaces' or 'Localhost' here.</span>
</div>
<div class=main-content-wrap>
<p>If you need to make changes here, change the <strong>Network interfaces</strong> option to <em>All interfaces</em>, and click <span class="highlight-text primary">Save</span> at the bottom.</p>
<p>Next, head over to <strong>Firewall > NAT > Port Forward</strong> and click <span class="highlight-text green">↑ Add</span> to add a new rule to the top of the list. I&rsquo;ll assume you&rsquo;re using the LAN interface here, but if you&rsquo;re using several VLANs on one interface, use the VLAN interface instead, and repeat for each VLAN. Fill the rule in as follows:</p>
<ul>
<li><strong>Interface:</strong> LAN</li>
<li><strong>Protocol:</strong> TCP/UDP</li>
<li><strong>Destination:</strong> Invert Match <strong>checked</strong>, LAN Address</li>
<li><strong>Destination Port Range:</strong> 53 (DNS)</li>
<li><strong>Redirect Target IP:</strong> [<em>Your LAN IP</em>]</li>
<li><strong>Redirect Target Port:</strong> 53 (DNS)</li>
<li><strong>Description:</strong> Redirect DNS</li>
<li><strong>NAT Reflection:</strong> Disable</li>
<li><strong>Filter rule association:</strong> Create new associated filter rule</li>
</ul>
<p>When you&rsquo;re done, the rule should look like this:</p>
</div>
<div class="figure figure--fullWidth">
<img class=figure-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/pfsense-port-forward.png alt="The resulting port forward rule"><span class=caption>The resulting port forward rule</span>
</div>
<div class=main-content-wrap>
<p>In order to completely block external DNS servers, we have to add one more firewall rule. Navigate to <strong>Firewall > Rules</strong> and choose whatever tab you&rsquo;re using for the interface you&rsquo;re configuring this on. From there, find the firewall rule that we just created with the port forward, and click the copy icon to duplicate it. Change the settings as follows:</p>
<ul>
<li><strong>Action:</strong> Block</li>
<li><strong>Destination:</strong> Any</li>
</ul>
<p>The resulting two firewall rules should be at the top of your list for your interface, and should look like this:</p>
</div>
<div class="figure figure--fullWidth">
<img class=figure-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-02-forcing-pfsense-dns/pfsense-firewall-dns-block.png alt="Make sure you have the allow rule above the block rule, otherwise DNS won't work!"><span class=caption>Make sure you have the allow rule above the block rule, otherwise DNS won't work!</span>
</div>
<div class=main-content-wrap>
<p>If you&rsquo;re running multiple VLANs, or you have other interfaces you want to apply this to, you&rsquo;ll have to create separate NAT and firewall rules for each interface, just like we did above.</p>
<h2 id=hahahugoshortcode-s11-hbhb-allow-_some_-dns-sources><span class="highlight-text orange">Bonus tip!</span> Allow <em>some</em> DNS sources</h2>
<p>If your setup is like mine, you might not want to necessarily restrict DNS to only pfSense, as we currently have Pi-hole doing ad blocking. In this case, you can create an alias in the firewall with allowed DNS addresses, and instead of defining <strong>LAN address</strong> in the port forward rule, we can define the alias instead. This way, instead of matching and redirecting all DNS traffic that&rsquo;s not to the pfSense interface address, we can make an alias that&rsquo;ll allow it to only redirect DNS not matching <em>either</em> the Pi-hole, or the pfSense interface.</p>
<p>If you want, you can also tweak the redirect from your LAN address, and put the Pi-hole address instead, to force DNS to go through the Pi-hole. This could be useful for things like Google Home, or Alexa devices. The only downside is that if the port forward forcibly redirects DNS to Pi-hole instead, DNS will stop working if the Pi-hole is down for some reason.</p>
</div>
</div>
<div id=post-footer class="post-footer main-content-wrap">
<div class=post-actions-wrap>
<nav>
<ul class="post-actions post-action-nav">
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-3-pfblockerng/ data-tooltip="Wrangling DNS on Your Network, Part 3: pfBlockerNG" aria-label="NEXT: Wrangling DNS on Your Network, Part 3: pfBlockerNG">
<i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-1-pi-hole/ data-tooltip="Wrangling DNS on Your Network, Part 1: Pi-hole" aria-label="PREVIOUS: Wrangling DNS on Your Network, Part 1: Pi-hole">
<span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i>
</a>
</li>
</ul>
</nav>
<ul class="post-actions post-action-share">
<li class="post-action hide-lg hide-md hide-sm">
<a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post">
<i class="fa fa-share-alt" aria-hidden=true></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/" title="Share on Facebook" aria-label="Share on Facebook">
<i class=fa-facebook-official aria-hidden=true></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/" title="Share on Twitter" aria-label="Share on Twitter">
<i class=fa-twitter aria-hidden=true></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/" title="Share on Google+" aria-label="Share on Google+">
<i class=fa-google-plus aria-hidden=true></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#top aria-label="Back to top">
<i class="fa fa-arrow-up" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
</div>
</article>
<footer id=footer class=main-content-wrap>
<span class=copyrights>
&copy; 2022 Andy Yasger. All Rights Reserved
</span>
</footer>
</div>
<div id=bottom-bar class=post-bottom-bar data-behavior=1>
<div class=post-actions-wrap>
<nav>
<ul class="post-actions post-action-nav">
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-3-pfblockerng/ data-tooltip="Wrangling DNS on Your Network, Part 3: pfBlockerNG" aria-label="NEXT: Wrangling DNS on Your Network, Part 3: pfBlockerNG">
<i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-1-pi-hole/ data-tooltip="Wrangling DNS on Your Network, Part 1: Pi-hole" aria-label="PREVIOUS: Wrangling DNS on Your Network, Part 1: Pi-hole">
<span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i>
</a>
</li>
</ul>
</nav>
<ul class="post-actions post-action-share">
<li class="post-action hide-lg hide-md hide-sm">
<a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post">
<i class="fa fa-share-alt" aria-hidden=true></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/" title="Share on Facebook" aria-label="Share on Facebook">
<i class=fa-facebook-official aria-hidden=true></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/" title="Share on Twitter" aria-label="Share on Twitter">
<i class=fa-twitter aria-hidden=true></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-2-forcing-pfsense-dns/" title="Share on Google+" aria-label="Share on Google+">
<i class=fa-google-plus aria-hidden=true></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#top aria-label="Back to top">
<i class="fa fa-arrow-up" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
</div>
<div id=share-options-bar class=share-options-bar data-behavior=1>
<i id=btn-close-shareoptions class="fa fa-times"></i>
<ul class=share-options>
<li class=share-option>
<a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.flippedbits.io%2F2020%2F07%2Fwrangling-dns-on-your-network-part-2-forcing-pfsense-dns%2F" aria-label="Share on Facebook">
<i class=fa-facebook-official aria-hidden=true></i><span>Share on Facebook</span>
</a>
</li>
<li class=share-option>
<a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fblog.flippedbits.io%2F2020%2F07%2Fwrangling-dns-on-your-network-part-2-forcing-pfsense-dns%2F" aria-label="Share on Twitter">
<i class=fa-twitter aria-hidden=true></i><span>Share on Twitter</span>
</a>
</li>
<li class=share-option>
<a class=share-option-btn target=new href="https://plus.google.com/share?url=https%3A%2F%2Fblog.flippedbits.io%2F2020%2F07%2Fwrangling-dns-on-your-network-part-2-forcing-pfsense-dns%2F" aria-label="Share on Google+">
<i class=fa-google-plus aria-hidden=true></i><span>Share on Google+</span>
</a>
</li>
</ul>
</div>
<div id=share-options-mask class=share-options-mask></div>
</div>
<div id=about>
<div id=about-card>
<div id=about-btn-close>
<i class="fa fa-times"></i>
</div>
<img id=about-card-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture">
<h4 id=about-card-name>Andy Yasger</h4>
<div id=about-card-bio>&ldquo;My documentation is <em><strong>in</strong></em> the code!&rdquo;</div>
<div id=about-card-job>
<i class="fa fa-briefcase"></i>
<br>
Homelabber and IT enthusiast
</div>
<div id=about-card-location>
<i class="fa fa-map-marker-alt"></i>
<br>
United States
</div>
</div>
</div>
<div id=cover style=background-image:url(https://blog.flippedbits.io/img/side-banner.jpg)></div>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://blog.flippedbits.io/js/script-k098bcs6cnvhyxawjwpwt88st6nvvdrnhqc6tytvmax3eeviyshusassfxj2.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:!1}),$('pre.code-highlight > code, pre > code').each(function(b,a){$(this).hasClass('codeblock')||$(this).addClass('codeblock'),hljs.highlightBlock(a)})})</script>
</body>
</html>