<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.73.0 with theme Tranquilpeak 0.4.8-BETA"><meta name=author content="Andy Yasger"><meta name=keywords content><meta name=description content="Some people swear by Pi-hole, and some people say pfBlockerNG is better. But how do they compare against each other?"><meta property="og:description" content="Some people swear by Pi-hole, and some people say pfBlockerNG is better. But how do they compare against each other?"><meta property="og:type" content="article"><meta property="og:title" content="Wrangling DNS on Your Network, Part 4: Pi-hole vs. pfBlockerNG"><meta name=twitter:title content="Wrangling DNS on Your Network, Part 4: Pi-hole vs. pfBlockerNG"><meta property="og:url" content="https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><meta property="twitter:url" content="https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><meta property="og:site_name" content="FlippedBits.io"><meta property="og:description" content="Some people swear by Pi-hole, and some people say pfBlockerNG is better. But how do they compare against each other?"><meta name=twitter:description content="Some people swear by Pi-hole, and some people say pfBlockerNG is better. But how do they compare against each other?"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2020-07-10T00:00:00"><meta property="article:modified_time" content="2020-07-10T00:00:00"><meta property="article:section" content="Networking"><meta property="article:section" content="DNS"><meta property="article:section" content="Tutorials"><meta property="article:tag" content="network"><meta property="article:tag" content="dns"><meta property="article:tag" content="pfsense"><meta property="article:tag" content="pihole"><meta property="article:tag" content="pfblockerng"><meta property="article:tag" content="adblock"><meta name=twitter:card content="summary"><meta property="og:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/header.png"><meta property="twitter:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/header.png"><meta property="og:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/header.png"><meta property="twitter:image" content="https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/header.png"><meta property="og:image" content="https://blog.flippedbits.io/img/profile.jpg"><meta property="twitter:image" content="https://blog.flippedbits.io/img/profile.jpg"><title>Wrangling DNS on Your Network, Part 4: Pi-hole vs. pfBlockerNG</title><link rel=icon href=https://blog.flippedbits.io/favicon.png><link rel=canonical href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin=anonymous><link rel=stylesheet href=https://blog.flippedbits.io/css/style-4esn1kmdyrc91phnvdi1zgn9saxvg5nhngxszpldffxrjlmep9ktolhwe1.min.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-170794764-1','auto');ga('send','pageview');}</script></head><body><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://blog.flippedbits.io/>FlippedBits.io</a></div><a class=header-right-picture href=https://blog.flippedbits.io/#about><img class=header-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture"></a></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=https://blog.flippedbits.io/#about><img class=sidebar-profile-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture"></a><h4 class=sidebar-profile-name>Andy Yasger</h4><h5 class=sidebar-profile-bio>&ldquo;My documentation is <em><strong>in</strong></em> the code!&rdquo;</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/><i class="sidebar-button-icon fa fa-lg fa-home"></i><span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/categories><i class="sidebar-button-icon fa fa-lg fa-bookmark"></i><span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/tags><i class="sidebar-button-icon fa fa-lg fa-tags"></i><span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/archives><i class="sidebar-button-icon fa fa-lg fa-archive"></i><span class=sidebar-button-desc>Archives</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/page/about-me><i class="sidebar-button-icon fa fa-lg fa-question"></i><span class=sidebar-button-desc>About Me</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/TechGeek01 target=_blank rel=noopener><i class="sidebar-button-icon fa fa-lg fa-github"></i><span class=sidebar-button-desc>GitHub</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/index.xml><i class="sidebar-button-icon fa fa-lg fa-rss"></i><span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div class="post-header-cover
text-center
post-header-cover--partial" style=background-image:url(/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/header.png) data-behavior=4></div><div id=main data-behavior=4 class="hasCover
hasCoverMetaOut"><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class="post-header main-content-wrap text-center"><h1 class=post-title itemprop=headline>Wrangling DNS on Your Network, Part 4: Pi-hole vs. pfBlockerNG</h1><div class="postShorten-meta post-meta"><time itemprop=datePublished datetime=2020-07-10T00:00:00Z>July 10, 2020</time>
<span>in</span>
<a class=category-link href=https://blog.flippedbits.io/categories/networking>Networking</a>,
<a class=category-link href=https://blog.flippedbits.io/categories/dns>DNS</a>,
<a class=category-link href=https://blog.flippedbits.io/categories/tutorials>Tutorials</a></div></div><div class="post-content markdown" itemprop=articleBody><div class=main-content-wrap><p>A short while back, I <a href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-3-pfblockerng/>installed pfBlockerNG to replace Pi-hole</a> in an attempt to eliminate the second hop of splitting adblock and local hostname resolution, and get DNS on one device, and to try it out. Many of you wanted to see a comparison between the two, so I thought I&rsquo;d explain some of the differences.</p><div class="alert info"><p><p>It should be noted that at the time of writing, the main package is v2.1.4_22, and the <code>devel</code> package is v2.2.5_33.</p><p>This comparison is against Pi-hole v5.0, and pfBlockerNG-devel v2.2.5_33.</p><p>BBCan177 has said that the plan is for <code>devel</code> to become the main version sometime hopefully soon. If that goes according to plan, the UI in the main version probably will look the same, and adopt the new organization scheme.</p></p></div><h2 id=first-things-first>First thing&rsquo;s first</h2><p>Before we get started here, I want to address the elephant in the room. Yes, I know pfBlockerNG does way more stuff than Pi-hole, and I know they&rsquo;re not directly comparable. However, you <em>can</em> use pfBlockerNG to replace Pi-hole if you don&rsquo;t wanna touch a bunch of other features.</p><p>Fair warning, if you want to make the switch, and you&rsquo;re used to Pi-hole, pfBlockerNG takes a bit longer to set up, and it&rsquo;s not as simple. There&rsquo;s a bit of manual effort required to set pfBlockerNG up, there are a lot of things that it reports that you might not need, and it&rsquo;s not a plug and play solution. It will require some fiddling, it will require more manual work, and it might confuse you a little bit when you&rsquo;re setting things up.</p><p>That being said, pfBlockerNG is an awesome tool, and if you want to make the jump, it&rsquo;s totally worth it, because there&rsquo;s so much more than just DNS blocking that it can do.</p><p>The glaringly obvious issue that I ran into, is that because the block lists range from slightly more aggressive than Pi-hole, all the way to really thorough ones, some stuff you use, somewhere, is probably going to be blocked. This is a good security bonus, because it keeps more of the nasty stuff out, but it means that depending on the lists you choose, you may have to do some fiddling. This isn&rsquo;t the fault of pfBlockerNG, but rather the aggressiveness of the block lists being used.</p><p>You might find a website that you can&rsquo;t get to, and find that it&rsquo;s an easy fix. Or you might spend days wondering why a game doesn&rsquo;t work right. This might be a smooth ride for you, or you might have to spend time digging into what things are trying to get to and why, in order to determine what you need to unblock. You might scratch your head. You might swear a lot at things that aren&rsquo;t working. You might cry.</p><p>Such is life with hardening security with any firewall, figuring out what you can and can&rsquo;t get away with. pfBlockerNG is no exception to this, especially if you&rsquo;re using some more aggressive block lists than I am.</p><p>Your mileage may vary here, but over the course of the last few days, I had to whitelist the following:</p><ul><li>analytics.google.com</li></ul><h2 id=the-setup>The setup</h2><p>Pi-hole&rsquo;s setup is dead simple. It walks you through absolutely everything, and will automatically download the blacklists and enable them. Pick an IP, a hostname, and a DNS provider, and answer a few simple questions, and you&rsquo;re done in less than 5 minutes. If you don&rsquo;t want to tweak anything else, you&rsquo;re good to go, and it just works right then and there, no other work necessary.</p><p>pfBlockerNG, on the other hand, takes about the same time to run through the wizard, and also self-updates when you&rsquo;re done. Once you&rsquo;re done, however, there&rsquo;s a bit of manual work that needs to be done, and you need to pick and enable some extra block lists, and manually update to get them to take effect. All in all, it takes less than 10 minutes, but it&rsquo;s a bit more involved.</p><h2 id=simple-reports>Simple reports</h2><p>For simple reports of stuff that&rsquo;s happened, like top blocked domains, clients, and other sorts of stats, both services lay everything out in a sort of similar way.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-reports.png></div><p>On Pi-hole, stats for queries over 24 hours, as well as query type, clients, and the like, are right on the main page. Heading over to <code>pi.hole</code>, or in my case, <code>pihole.mydomain.com</code>, redirects you to the /admin page, and after logging in, here, you&rsquo;ll find those stats.</p><p>Pi-hole is also nice enough to show overall stats up top, like total queries, total and percentage blocked, and items on the blocklist.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-query-log.png></div><p>If you want to see a log of recent queries, you can find that under <strong>Query Log</strong> in the sidebar. This shows up to 100 recent DNS queries.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-reports.png></div><div class="alert info"><p>pfBlockerNG, being a pfSense package, lives inside the pfSense GUI, at Firewall > pfBlockerNG. I will be referring to places to navigate in pfBlockerNG relative to that page.</p></div><p>pfBlockerNG is a bit more buried, since the main pfBlockerNG admin page is for configuring settings. To view reports, you&rsquo;ll find the stats all under the <strong>Reports</strong> tab. For the DNSBL stats, like we&rsquo;re using to replace Pi-hole, you&rsquo;ll need to further go into the <strong>DNSBL Stats</strong> sub-tab. This may seem a bit clunkier, but this is just the nature of how this has to be configured, since pfBlockerNG does other stuff besides just DNS block lists.</p><p>In the DNSBL stats page, you&rsquo;ll find graphs that look similar to Pi-hole&rsquo;s, but for a whole lot more stuff. Like Pi-hole, pfBlockerNG lets you see top blocked domains and top clients (referred to as <strong>Top Source IP</strong>), but you also get stats like top activity broken down by hour, top blocked page types, user agents, and more.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-reports-alerts.png></div><p>To look at the recent queries, just like you&rsquo;d find in Pi-hole, you can go to <strong>Reports > Alerts</strong>, where you&rsquo;ll be presented with a list of things that are happening. For DNS blocking, the <strong>DNSBL</strong> section will show you the list of blocked domain queries.</p><p>Since pfBlockerNG also does more than just DNS blocking, you can also check out the <strong>IP Block Stats</strong>, <strong>IP Permit Stats</strong>, and <strong>IP Match Stats</strong> sub-tabs under <strong>Reports</strong> to see graphs for things like GeoIP blocking or similar.</p><p>Admittedly, there&rsquo;s a lot of info to take in here, but it shows some interesting stuff.</p><h2 id=whitelisting-domains>Whitelisting domains</h2><p>Occasionally, when you&rsquo;re working with a firewall, or DNS blocking solution, there&rsquo;s inevitably a time when something you need to get to is going to get blocked.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-whitelist.png></div><p>In Pi-hole, to view the whitelist, you can click on the <strong>Whitelist</strong> option in the sidebar. This takes you to a page where you can view the custom whitelist, change settings like group assignment, and toggle or delete entries. From here, you can also manually add entries to the whitelist by entering the domain, and an optional comment about the entry. Under &ldquo;type&rdquo;, you can change each domain in the list to be either exact, or a wildcard entry.</p><p>You can also find a very similar looking list under <strong>Group Management > Domains</strong> where you can have the option under &ldquo;type&rdquo; to swap a domain between whitelist and blacklist.</p><p>The process here seems a bit redundant, to have both whitelist/blacklist, and a global page to show both, and having the option on either page to add the same data to the same list, but that&rsquo;s how Pi-hole has laid things out. The unfortunate thing, is that as far as I can tell, there&rsquo;s no way to automatically add something to a whitelist. You have to add the entry manually via the form.</p><p>The one thing you do have here is an option to regex match, which unfortunately, is not a thing that can be done in pfBlockerNG.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-whitelist.png alt="You can manually edit the whitelist to add entries">
<span class=caption>You can manually edit the whitelist to add entries</span></div><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-whitelist-block-reports.png alt="From the reports list, you can automatically add an entry to the whitelist, by clicking a button next to a domain">
<span class=caption>From the reports list, you can automatically add an entry to the whitelist, by clicking a button next to a domain</span></div><p>pfBlockerNG has a bit of an advantage here, because you have two options. If you&rsquo;d like to add a whitelist entry manually, you can go to the <strong>DNSBL</strong> tab, and click the + next to the <strong>DNSBL Whitelist</strong> section to expand it. From there, you can add a new line to add your entry manually to the whitelist, and click <span class="highlight-text primary">Save</span> at the bottom to save.</p><p>The other option, which is a bit friendlier, is to navigate to <strong>Reports > Alerts</strong>, and under the <strong>DNSBL</strong> section, this will show you the recently blocked domains, and the source IP that requested them. For each of these domains, you can click the <strong>+</strong> in the entry, and you&rsquo;ll be asked if you want to whitelist only that domain, or if you want to add a wildcard entry, to whitelist the domain, and subdomains.</p><p>The interface might seem a bit clunkier here, as Pi-hole definitely has a more polished UI, but this option to just add an entry from the blocked domain reports is a feature I really wish Pi-hole had.</p><h2 id=blacklisting-domains>Blacklisting domains</h2><p>For the most part, since you&rsquo;re probably using either Pi-hole or pfBlockerNG as a DNS blacklist, you probably don&rsquo;t need to specifically blacklist stuff manually. Should you, however, need to keep your kids off of a certain website, or manually add an ad domain that might be slipping through, you do have that option.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-blacklist.png></div><p>In Pi-hole, this interface probably looks really familiar to you. Just like the whitelist, we can navigate to <strong>Blacklist</strong> in the side navigation, and we&rsquo;re presented with the same form to add entries, and we can select between normal and wildcard entries, or even do a regex match.</p><p>Again, just like the whitelist, we have the same list of what&rsquo;s already there, and the same options for toggling, changing, or deleting entries. And like the whitelist, these can also be found in the list under <strong>Group Management > Domains</strong>.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-blacklist-tld.png alt="pfBlockerNG has a built-in TLD blacklist option">
<span class=caption>pfBlockerNG has a built-in TLD blacklist option</span></div><p>Blacklisting domains in pfBlockerNG is a bit trickier. Under the <strong>DNSBL</strong> tab, there is a section that can be expanded to edit a TLD whitelist or blacklist, but that&rsquo;s not quite what we want, unless we want to specifically block, say, all .com domains.</p><p>To actually block specific things, we&rsquo;ll need to dive a bit deeper.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-dnsbl-groups.png alt="The DNSBL groups page has an option to add a new group">
<span class=caption>The DNSBL groups page has an option to add a new group</span></div><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-custom-feed.png alt="Here, you and add a list of stuff">
<span class=caption>Here, you and add a list of stuff</span></div><p>If we head over to <strong>DNSBL > DNSBL Groups</strong>, we&rsquo;re presented with a list of all of the DNSBL groups we have configured. At the bottom, notice how we have the option to <span class="highlight-text green">Add</span> a group.</p><p>If we do that, we get a page that looks really similar to the page to configure new feeds that we enable. Here, you can give your feed a name, and toggle the action to be Unbound, just like we did for all of the default feeds when we set up pfBlockerNG.</p><p>The trick here is that instead of adding a blocklist URL under the <strong>DNSBL Source Definitions</strong> section, we instead scroll down to the <strong>DNSBL Custom_List</strong>, there&rsquo;s an option to enter a list of stuff to block. This is formatted just like you see in the DNSBL whitelist on the <strong>DNSBL</strong> tab. Each line is a new entry, and we can block domains or subdomains like <code>analytics.google.com</code>, or wildcard domains like <code>.analytics.google.com</code> (notice the leading <code>.</code> on wildcard matches).</p><p>Unfortunately, there&rsquo;s no option to do regex matching like we have the option for in Pi-hole.</p><p>Once your list is complete, click on <span class="highlight-text primary">Save DNSBL Settings</span>, and your changes will be saved.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-blacklist-custom-entry.png></div><p>If we head back to the <strong>DNSBL > DNSBL Groups</strong> sub-tab, we can see that we have a new entry in the list. To edit this list later, to add or remove domains, we can come back to this page, and click the pencil icon to the right of our entry.</p><h2 id=local-dns-records>Local DNS records</h2><p>If you run a homelab like I do, you probably have a whole lot of stuff you want to keep track of, because remembering IPs is boring and hard when you&rsquo;re looking for something in a browser. The solution here is to add local DNS records.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-local-dns-records.png></div><div class="alert info"><p>This used to not be an option in Pi-hole. If you want to use Pi-hole for local DNS records like this, you&rsquo;ll need to make sure you&rsquo;re on version 5.0. I&rsquo;ve been using Pi-hole since well before v5.0, so I&rsquo;ve taken to handling local DNS on pfSense.</p></div><p>In the sidebar, if we head to <strong>Local DNS Records</strong> We are presented with a page that lets us add our own domains and subdomains, and specify the IPs they point to. We can also see the list of domains we&rsquo;re already set up for.</p><div class="alert info"><p>The only action we can perform is to delete an entry, so if you need to edit an entry, you&rsquo;ll have to delete and recreate it.</p></div><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfsense-dns-resolver.png></div><p>In pfBlockerNG, we <em>technically</em> don&rsquo;t have the option for local DNS. However, pfSense itself does have a built in DNS resolver that we can use to add custom entries. Head on over to ** Services > DNS Resolver** in the top menu of pfSense, and you&rsquo;ll see a screen that looks a bit like this. At the bottom of the **Host Overrides** section, you can click <span class="highlight-text green">Add</span> to add an entry to the list.</p><p>Once you&rsquo;ve done that, in pfSense, you have to manually click the button in the yellow banner to reload your changes. This tends to be useful for making a lot of changes at once, in case updating live halfway through may potentially break DNS with something (if you&rsquo;re editing a large batch of entries, for example). You also have the option in this list to edit or delete each entry.</p><p>The lovely thing about pfSense&rsquo;s DNS resolver over Pi-hole is that there&rsquo;s an option to create aliases, where you can assign several domains to the same IP, without having to update each one if the IP changes. This can be very useful in the case of things like a reverse proxy, where you might want a large batch of subdomains to run to one IP for processing with your own reverse proxy.</p><h2 id=querying-data>Querying data</h2><p>If you need to query data, we&rsquo;ve learned how to do that, but if you need to look back at data that&rsquo;s a bit older, to get a larger picture, it&rsquo;s a slightly different process.</p><p>In the sidebar, there&rsquo;s a section labeled <strong>Long term data</strong>. Under this, you&rsquo;ll find sections for <strong>Graphics</strong>, <strong>Query Log</strong>, and <strong>Top Lists</strong>.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-long-term-graphics.png></div><p>The <strong>Graphics</strong> section shows a bar graph of queries over a given time. This is just like the graph for 24 hours that we see on the main dashboard page, but for a custom time range.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-long-term-query-log.png></div><p>The <strong>Query Log</strong> section shows the same list we saw in the default <strong>Query Log</strong> page, but again, for a selected time range.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-long-term-top-lists.png></div><p>The <strong>Top Lists</strong> page shows the lists we can find on the main dashboard for top permitted or blocked domains, and top clients, once again, for a selected time range.</p><h2 id=editing-block-lists>Editing block lists</h2><p>If you want to block specific things in a whole group, the easy way to do this is to customize your block lists. Both Pi-hole and pfBlockerNG provide ways to do this.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-group-management-adlists.png></div><p>Previously, Pi-hole hid blocklist management under the <strong>Settings</strong> page. With Pi-hole 5.0, it&rsquo;s got its own page under <strong>Group Management > Adlists</strong>. From here, you can enable, disable, or delete adlists that are already in the list, or you can add URLs to new lists yourself.</p><div class="alert warning"><p>In order for your changes to take effect, you&rsquo;ll have to update Pi-hole&rsquo;s gravity list, either with <code>pihole -g</code> from the terminal, or <strong>Tools > Update Gravity</strong> in the GUI, so that it can pull down the new adlists</p></div><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-dnsbl-groups.png alt="Existing feeds can be edited and managed from the DNSBL Groups sub-tab">
<span class=caption>Existing feeds can be edited and managed from the DNSBL Groups sub-tab</span></div><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-feeds-dnsbl.png alt="New feeds can be added via the Feeds tab">
<span class=caption>New feeds can be added via the Feeds tab</span></div><p>If you&rsquo;d like to edit your existing DNSBL groups, you can navigate to <strong>DNSBL > DNSBL Groups</strong>, where you can edit or delete existing groups.</p><p>In order to add new groups, you can navigate to the <strong>Feeds</strong> tab, and scroll down to the <strong>DNSBL</strong> section. From there, you can click the + on the left next to a whole group to tweak group settings, and enable the whole group, or specific feeds from it. If you fancy adding one feed at a time, you can also click the + on the right next to each individual feed.</p><div class="alert warning"><p>Be careful about adding too many feeds, since the more feeds you add, the more resources (particularly RAM), pfBlockerNG needs to run.</p></div><div class="alert warning"><p>In order for your changes to take effect, you&rsquo;ll have to update pfBlockerNG.</p></div><h2 id=enabling-and-disabling>Enabling and disabling</h2><p>The purpose of a DNS ad blocker is that when it&rsquo;s running, it blocks ads, or tracking, or whatever you want. You rarely want to disable this, but doing so can be a good idea to determine if the blocking is causing problems with an application or website.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-disable-sidebar-expanded.png></div><p>Pi-hole allows you to temporarily disable the adblocking service via the sidebar. Expanding the <strong>Disable</strong> option gives a list of times to disable for, or we can set a custom timeframe, after which, it will be re-enabled.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-disable-sidebar-time.png></div><p>Once disabled, the sidebar will show a countdown timer, and clicking it will re-enable everything before that time runs out.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-disable.png></div><p>To disable pfBlockerNG as a whole, you can uncheck the <strong>pfBlockerNG</strong> option under the <strong>General Settings</strong> section on the <strong>General</strong> tab, and <span class="highlight-text primary">Save</span>.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-dnsbl-disable.png></div><p>If you instead would like to only disable the DNSBL blocking, you can uncheck the <strong>DNSBL</strong> option under the <strong>DNSBL</strong> section on the <strong>DNSBL</strong> tab (In case you haven&rsquo;t figured out, this disables DNSBL 😄), and <span class="highlight-text primary">Save</span>.</p><p>Neither of these options have a timer on them, so you&rsquo;ll have to manually re-enable them later.</p><h2 id=settings>Settings</h2><p>There&rsquo;s definitely more settings for tweaking everything, and for the most part, they&rsquo;re a &ldquo;set it and forget it&rdquo; type of thing, and you won&rsquo;t have to come back to them much, if at all. It&rsquo;s generally important to know where these settings are though.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-settings-system.png></div><p>Pi-hole&rsquo;s settings are all under the <strong>Settings</strong> option in the sidebar. The default page gives you a bunch of information about your system, including versions, interface information, memory stats, and DNS cache info.</p><p>At the bottom, there&rsquo;s a &ldquo;Danger zone&rdquo; with buttons to disable logging, flush the ARP table, restart the DNS resolver, clear logs, or restart or shut down the whole system.</p><p>There&rsquo;s also a Blocklists tab, which is where you&rsquo;d edit the blocklists prior to v5.0, but this has since been moved to <strong>Group Management > Adlists</strong>.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-settings-dns.png></div><p>On the <strong>DNS</strong> tab, you can change how Pi-hole works with DNS servers. There&rsquo;s options here to change your upstream servers, select custom upstream servers, as well as defining advanced settings like conditional forwarding.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-settings-dhcp.png></div><p>If you were using Pi-hole as a DHCP server, which would mean you&rsquo;d have the DHCP service on your router disabled, you can tweak settings about what range it hands out from, and what info it tells clients to use, on this tab.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-settings-api.png></div><p>On the <strong>API / Web Interface</strong> tab, you can change the temperature unit for the CPU temp in the sidebar, add an admin email, exclude domains or clients from showing up in the GUI in the lists and graphs, or view API tokens.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-settings-privacy.png></div><p>The <strong>Privacy</strong> tab lets you determine the privacy level of the queries, as far as anonymity level and how much gets logged.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-settings-teleporter.png></div><p>The <strong>Teleporter</strong> is where you can export backups of query data, and import them should you reinstall Pi-hole, or move it to a new system.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-settings-dnsbl.png></div><p>The main settings for the DNSBL portion of pfBlockerNG can be found under the <strong>DNSBL</strong> tab. Here, you can change settings for the virtual webserver, the general DNSBL settings, or tweak the whitelist or exclusion lists.</p><p>For the more general settings for pfBlockerNG as a whole, you can poke through the <strong>General</strong> tab. There&rsquo;s a ton of other options in some of these menus, which I go over in much more detail in <a href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-3-pfblockerng/>part 3</a> of this DNS tutorial, where we installed pfBlockerNG to replace Pi-hole.</p><h2 id=updating>Updating</h2><p>For the most part, you won&rsquo;t have to touch this, but occasionally, you&rsquo;ll have to eventually update things.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-update-gravity.png></div><p>Pi-hole&rsquo;s adlists aren&rsquo;t updated automatically as far as I can tell. They tend not to change much, but you&rsquo;ll have to manually update them in case they do. For this, you can either navigate to <strong>Tools > Update Gravity</strong> in the sidebar, or you can run <code>pihole -g</code> in the terminal.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pihole-footer-versions.png></div><p>Occasionally, you&rsquo;ll run into a scenario when there&rsquo;s an update to Pi-hole itself, the web interface, or FTL, in which case, you&rsquo;ll see an &ldquo;Update available&rdquo; message in the footer on the web GUI.</p><p>Because these updates involve the Pi-hole system as a whole, or the web GUI itself, you can&rsquo;t self update from the web interface, since these updates typically need to replace parts of the web GUI, or restart it, or the Pi-hole service entirely. In order to actually perform these updates, you&rsquo;ll need to issue <code>pihole -up</code> from the terminal.</p><p>This update also takes care of checking on adlists, so you won&rsquo;t have to update gravity later, since it&rsquo;s done for you during the system update.</p><h2 id=so-whats-next>So what&rsquo;s next?</h2><blockquote class=pullquote><p>That's basically everything Pi-hole can do, but what about everything else? There's a whole bunch more options and settings in pfBlockerNG that I don't know what they do yet!</p></blockquote><p>I hear you! pfBlockerNG is a fairly extensive package, and it does a lot of stuff besides just DNS blocking. So what exactly, can it all do?</p><h2 id=ip-blocking>IP blocking</h2><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2020/07/wrangling-dns-pt-04-pihole-vs-pfblockerng/pfblockerng-ip.png></div><p>IP blocking, and sets of firewall rules can be configured. By default, when you install pfBlockerNG, this gets enabled. This allows it to perform more advanced rules. Some of the filters include blocking things via the firewall, to keep malicious stuff out of your network.</p><h2 id=geoip-blocking>GeoIP blocking</h2><p>If you wanted to, you can also handle geographical blocking of IPs. This is a bit more advanced, and requires you to enter a MaxMind license to enable it, but you can use it to do things like disabling access to any IP in Russia, for example.</p><h2 id=policy-based-routing>Policy-based routing</h2><p>If you have a multi-WAN setup, or use a VPN, policy-based routing can be useful for dealing with traffic flow. Sometimes, you might hit a site that doesn&rsquo;t respond well to a VPN, or you might want to direct traffic from most sources through one WAN interface, but specific clients or different subnets through another.</p><h2 id=conclusion>Conclusion</h2><blockquote class=pullquote><p>So, clearly, pfBlockerNG can do a lot more than Pi-hole, so that means I should install pfBlockerNG, right?</p></blockquote><p>Not exactly. pfBlocker is indeed more powerful than Pi-hole in general, but that&rsquo;s not always the best solution. If the only thing you want is a dead-simple DNS-based adblock solution, Pi-hole is probably the better choice.</p><p>If you like playing around, and don&rsquo;t mind the extra setup steps, or the involvement of pfBlockerNG, you can certainly go that route, and it can definitely be used solely for DNS blocking to replace Pi-hole.</p><p>Ultimately, the choice is up to you. They both have their strengths, and they both have things that maybe the other one does slightly better. Use this comparison to help your judgement, and decide for yourself!</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--disabled"><i class="fa fa-angle-left"></i><span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-3-pfblockerng/ data-tooltip="Wrangling DNS on Your Network, Part 3: pfBlockerNG"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><i class="fa fa-facebook-official"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><i class="fa fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><i class="fa fa-google-plus"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-list"></i></a></li></ul></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2020 Andy Yasger. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--disabled"><i class="fa fa-angle-left"></i><span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-3-pfblockerng/ data-tooltip="Wrangling DNS on Your Network, Part 3: pfBlockerNG"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><i class="fa fa-facebook-official"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><i class="fa fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://blog.flippedbits.io/2020/07/wrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng/"><i class="fa fa-google-plus"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-list"></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-close"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.flippedbits.io%2F2020%2F07%2Fwrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng%2F"><i class="fa fa-facebook-official"></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fblog.flippedbits.io%2F2020%2F07%2Fwrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng%2F"><i class="fa fa-twitter"></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://plus.google.com/share?url=https%3A%2F%2Fblog.flippedbits.io%2F2020%2F07%2Fwrangling-dns-on-your-network-part-4-pi-hole-vs.-pfblockerng%2F"><i class="fa fa-google-plus"></i><span>Share on Google+</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-remove"></i></div><img id=about-card-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture"><h4 id=about-card-name>Andy Yasger</h4><div id=about-card-bio>&ldquo;My documentation is <em><strong>in</strong></em> the code!&rdquo;</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Homelabber and IT enthusiast</div><div id=about-card-location><i class="fa fa-map-marker"></i><br>United States</div></div></div><div id=cover style=background-image:url(https://blog.flippedbits.io/img/side-banner.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin=anonymous></script><script src=https://blog.flippedbits.io/js/script-r1pwetvjpsxhew1tzs9njeug7ah8cyirkcfplwsbn717kxdjshsmropnl.min.js></script><script lang=javascript>window.onload=updateMinWidth;window.onresize=updateMinWidth;document.getElementById("sidebar").addEventListener("transitionend",updateMinWidth);function updateMinWidth(){var sidebar=document.getElementById("sidebar");var main=document.getElementById("main");main.style.minWidth="";var w1=getComputedStyle(main).getPropertyValue("min-width");var w2=getComputedStyle(sidebar).getPropertyValue("width");var w3=getComputedStyle(sidebar).getPropertyValue("left");main.style.minWidth=`calc(${w1} - ${w2} - ${w3})`;}</script><script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:false});$('pre.code-highlight > code, pre > code').each(function(i,block){if(!$(this).hasClass('codeblock')){$(this).addClass('codeblock');}
hljs.highlightBlock(block);});});</script></body></html>