<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Upgrading the Proxmox Server","image":"https://blog.flippedbits.io/img/posts/2022/03/upgrading-the-proxmox-server/header.png","datePublished":"2022-03-28T00:00:00Z","dateModified":"2022-03-28T00:00:00Z","author":{"@type":"Person","name":"Andy Yasger","image":"https://blog.flippedbits.io/img/profile.jpg"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.flippedbits.io\/2022\/03\/upgrading-the-proxmox-server\/"},"publisher":{"@type":"Organization","name":"FlippedBits.io","logo":{"@type":"ImageObject","url":"https://blog.flippedbits.io/img/profile.jpg"}},"description":"I got sick of running Proxmox on an old, power-hungry server on spinning hard drives, so I did something about it.","keywords":[]}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.96.0 with theme Tranquilpeak 0.5.2-BETA"><meta name=author content="Andy Yasger"><meta name=keywords content><meta name=description content="I got sick of running Proxmox on an old, power-hungry server on spinning hard drives, so I did something about it."><meta property="og:description" content="I got sick of running Proxmox on an old, power-hungry server on spinning hard drives, so I did something about it."><meta property="og:type" content="article"><meta property="og:title" content="Upgrading the Proxmox Server"><meta name=twitter:title content="Upgrading the Proxmox Server"><meta property="og:url" content="https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/"><meta property="twitter:url" content="https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/"><meta property="og:site_name" content="FlippedBits.io"><meta property="og:description" content="I got sick of running Proxmox on an old, power-hungry server on spinning hard drives, so I did something about it."><meta name=twitter:description content="I got sick of running Proxmox on an old, power-hungry server on spinning hard drives, so I did something about it."><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2022-03-28T00:00:00"><meta property="article:modified_time" content="2022-03-28T00:00:00"><meta property="article:section" content="Networking"><meta property="article:section" content="Servers"><meta property="article:section" content="Upgrades"><meta property="article:tag" content="network"><meta property="article:tag" content="supermicro"><meta property="article:tag" content="server"><meta property="article:tag" content="proxmox"><meta name=twitter:card content="summary"><meta property="og:image" content="https://blog.flippedbits.io/img/profile.jpg"><meta property="twitter:image" content="https://blog.flippedbits.io/img/profile.jpg"><meta property="og:image" content="https://blog.flippedbits.io/img/posts/2022/03/upgrading-the-proxmox-server/header.png"><meta property="twitter:image" content="https://blog.flippedbits.io/img/posts/2022/03/upgrading-the-proxmox-server/header.png"><meta property="og:image" content="https://blog.flippedbits.io/img/posts/2022/03/upgrading-the-proxmox-server/header.png"><meta property="twitter:image" content="https://blog.flippedbits.io/img/posts/2022/03/upgrading-the-proxmox-server/header.png"><title>Upgrading the Proxmox Server</title><link rel=icon href=https://blog.flippedbits.io/favicon.png><link rel=canonical href=https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://blog.flippedbits.io/css/style-8wq9cwjemt0dk532dhttp48fwretmmmm95f7njulto7vefeufdnasgq9a.min.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-170794764-1","auto"),ga("send","pageview"))</script></head><body><div id=blog><header id=header data-behavior=1><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://blog.flippedbits.io/ aria-label="Go to homepage">FlippedBits.io</a></div><a class=header-right-picture href=https://blog.flippedbits.io/#about aria-label="Open the link: /#about"><img class=header-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture"></a></header><nav id=sidebar data-behavior=1><div class=sidebar-container><div class=sidebar-profile><a href=https://blog.flippedbits.io/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture"></a><h4 class=sidebar-profile-name>Andy Yasger</h4><h5 class=sidebar-profile-bio>&ldquo;My documentation is <em><strong>in</strong></em> the code!&rdquo;</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/archives title=Archives><i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden=true></i>
<span class=sidebar-button-desc>Archives</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/page/about-me title="About Me"><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About Me</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/TechGeek01 target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blog.flippedbits.io/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div class="post-header-cover
text-center
post-header-cover--partial" style=background-image:url(/img/posts/2022/03/upgrading-the-proxmox-server/header.png) data-behavior=1></div><div id=main data-behavior=1 class="hasCover
hasCoverMetaOut"><article class=post id=top><div class="post-header main-content-wrap text-center"><h1 class=post-title>Upgrading the Proxmox Server</h1><div class="postShorten-meta post-meta"><time datetime=2022-03-28T00:00:00Z>March 28, 2022</time>
<span>in</span>
<a class=category-link href=https://blog.flippedbits.io/categories/networking>Networking</a>,
<a class=category-link href=https://blog.flippedbits.io/categories/servers>Servers</a>,
<a class=category-link href=https://blog.flippedbits.io/categories/upgrades>Upgrades</a><br><span class=postReadingTime>4 minute read</span></div></div><div class="post-content markdown"><div class=main-content-wrap><p>Until recently, Proxmox has been dutifully running on some old Dell servers. Primarily, it ran on an R510, though I did also have an R710 that sometimes got used as part of a cluster for some things. All in all, these aren&rsquo;t very powerful or power-efficient machines these days.</p><p>On the R510, Proxmox was running with dual Xeon E5620&rsquo;s, and 96GB of RAM. I had 4 drives in it, 2x3TB and 2x2TB, in a ZFS mirror with 5TB usable. Unfortunately, while this was faster than single hard drives, it was still slow, and was bottlenecked by older, slower processors as well. On top of it all, the whole thing idled at about 250W. The R710, while it was rarely used, was much of the same story, with dual X5660&rsquo;s, and 64GB of RAM with 8x600GB in RAIDz1 for 4.2TB usable.</p><p>I decided it was time for something new, and set out to build a replacement server. My goal was to make it both faster and more power efficient, while hopefully still upgrading the storage, and I think I achieved that goal.</p><h2 id=the-specs>The specs</h2><p>The chassis I&rsquo;ve chosen for this is a Supermicro 216. While I could have gone with other, slightly older chassis, I wanted something fast and modern, so a SAS3 backplane 216 seemed like a decent choice considering the deal I got on it.</p><p>I decided to go with the same Supermicro X10 platform as the Unraid server, as it went well for that upgrade, and didn&rsquo;t break the bank as much as X11 did. This new server is running dual E5-2630 v4&rsquo;s, the same as the Unraid server. I could have gone way more powerful for this server, but anything higher than a 2630 in v4 costs way more, and I don&rsquo;t use a whole ton of processing power at any given time anyway, so I figured I could upgrade down the line if I ever needed it. These things are 10 core, 20 threads each, which is a lot of room to play with.</p><p>I kitted it out with the same 16GB sticks of ECC DDR4 that I put in the Unraid server, though it was a bit more expensive this time around, so I ended up only buying 6 of them instead of 8. I did, however, prefer the performance of quad channel, and the headroom of 128GB over 96, so I elected to take 2 of the sticks from Unraid and put them in here.</p><p>Now, for storage, this is where we get to the fun part. This 216 chassis has a <code>BPN-SAS3-216EL1</code> backplane, which lets me put some pretty balls to the wall storage in here. I threw 4 SSDs in it, specifically, the Toshiba PX05SRQ192, which are 1.92TB SAS3 SSDs, capable of 1800MB/s reads and 850MB/s writes. All 4 of these are backed with a Dell H330 flashed to IT mode. This card is SAS3008-based, and lets me run all 4 of these SSDs at pretty fast speeds. Combine this with RAIDz1, and you have 5.76TB of usable storage, one drive redundancy, and a bunch of VMs where the Proxmox BIOS screen and GRUB menu (where there&rsquo;s intentional timeouts to wait for you to press a key), take longer to go by than the entire rest of the boot process, and most of that is waiting for the network link to come up.</p><h2 id=the-result>The result</h2><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2022/03/upgrading-the-proxmox-server/server-racked.jpg alt="All in all, this went pretty well, other than that the SAS cables are way longer than I needed them to be.">
<span class=caption>All in all, this went pretty well, other than that the SAS cables are way longer than I needed them to be.</span></div><p>I set some pretty ambitious goals here, as I wanted something that was faster, better, had more performance in general, and still wanted it to suck less power. So how did we do? Well, this is definitely more modern hardware, and has a less ewaste-y vibe to it than an R510.</p><div class=figure><img class=fig-img src=https://blog.flippedbits.io/img/posts/2022/03/upgrading-the-proxmox-server/cpu-comparison.png></div><p>I think the processing power increase speaks for itself, though it definitely isn&rsquo;t the most powerful processor in the realm of v4 Xeons.</p><p>However, there&rsquo;s one more thing I wanted to address: Power. Previously, the R510 used anywhere between 250 and 270W to do its thing, and that&rsquo;s without the processor being hit too hard. This new server boots in about a fifth of the time VM booting is near instant, and everything just feels a whole lot better. And the whole thing only sucks back 130W.</p><p>The next project on my list is upgrading pfSense, since I want a server that gets enough airflow to PCIe cards to not kill an SFP+ NIC. I&rsquo;ve been eyeballing the Supermicro X10SLH-N6-ST031 because it seems perfect for a router, and it&rsquo;s such a stupid looking motherboard. Maybe one day, I&rsquo;ll actually bite the bullet and buy one&mldr;</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--disabled"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2021/01/lets-talk-about-backups/ data-tooltip="Let's Talk About Backups" aria-label="PREVIOUS: Let's Talk About Backups"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/" title="Share on Facebook" aria-label="Share on Facebook"><i class=fa-facebook-official aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/" title="Share on Twitter" aria-label="Share on Twitter"><i class=fa-twitter aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/" title="Share on Google+" aria-label="Share on Google+"><i class=fa-google-plus aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2022 Andy Yasger. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=1><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--disabled"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blog.flippedbits.io/2021/01/lets-talk-about-backups/ data-tooltip="Let's Talk About Backups" aria-label="PREVIOUS: Let's Talk About Backups"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/" title="Share on Facebook" aria-label="Share on Facebook"><i class=fa-facebook-official aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/" title="Share on Twitter" aria-label="Share on Twitter"><i class=fa-twitter aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://blog.flippedbits.io/2022/03/upgrading-the-proxmox-server/" title="Share on Google+" aria-label="Share on Google+"><i class=fa-google-plus aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=1><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.flippedbits.io%2F2022%2F03%2Fupgrading-the-proxmox-server%2F" aria-label="Share on Facebook"><i class=fa-facebook-official aria-hidden=true></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fblog.flippedbits.io%2F2022%2F03%2Fupgrading-the-proxmox-server%2F" aria-label="Share on Twitter"><i class=fa-twitter aria-hidden=true></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://plus.google.com/share?url=https%3A%2F%2Fblog.flippedbits.io%2F2022%2F03%2Fupgrading-the-proxmox-server%2F" aria-label="Share on Google+"><i class=fa-google-plus aria-hidden=true></i><span>Share on Google+</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://blog.flippedbits.io/img/profile.jpg alt="Author's picture"><h4 id=about-card-name>Andy Yasger</h4><div id=about-card-bio>&ldquo;My documentation is <em><strong>in</strong></em> the code!&rdquo;</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Homelabber and IT enthusiast</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>United States</div></div></div><div id=cover style=background-image:url(https://blog.flippedbits.io/img/side-banner.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://blog.flippedbits.io/js/script-k098bcs6cnvhyxawjwpwt88st6nvvdrnhqc6tytvmax3eeviyshusassfxj2.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(t,e){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(e)})})</script></body></html>